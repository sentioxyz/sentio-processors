import { BigDecimal } from '@sentio/sdk'
import { GlobalContext } from '@sentio/sdk/eth'

const projects = Object.entries({
  Synstation: [
    '0xbDc61836abdf0542Fe4A0B8bf30Eaed77953684b',
    '0x1bAAcaf734Ab823037743f532CdFC4F13F128319',
    // OutcomeFactory
    '0xa546b3a3C71aD7ED2152551490049f85FE136B34',
    '0x6524bFeeBeCD6Af59533E3B32A53F6beF279F8b2',
    // GM
    '0x7F81F7E9D9Bfc0786868127EEc62EEb440193b3A',
    '0xE19Ab56608D893dE2801444E07F042c1fFdCf468',
    // FixedPSM (USDC)
    '0xdf7c9782CBb7b238456F213C91930fE4e607b493',
    '0xA730f28B6bc25ACbE72B8aeBA71C008438618f8B',
    // Outcome Router
    '0x1ccAA0C6448CCd836A09f62B1C0b2Df76f910424',
    '0xc1548A95637831f05C81b3f59A8df053B30A8d69',
    '0xc9b9DDEe50EA1842A36e4AA02d50211586b6eE63',
    '0x81B4029bfCb5302317fe5d35D54544EA3328e30f',
    // Autopilot-WETH
    '0xefb3Cc73a5517c9825aE260468259476e7965c5E',
    '0xe145ead17F6CF6505f98bB911766f7c53CE4Ea8F',
    '0xd15445221815BEFb9e70A0855E0107e759Fe0294',
    // Autopilot-ASTR
    '0x3BaC111A6F5ED6A554616373d5c7D858d7c10d88',
    '0x296763cfB9dBC01a0E461AAd3F87532e415F713e',
    // Autopilot-USDT
    '0x6A31048E5123859cf50F865d5a3050c18E77fFAe',
    '0x6c87f5C23DdB092930Ed80324b2fafF46b5fb586',
    // Autopilot-nsASTR
    '0x74dFFE1e68f41ec364517f1F2951047246c5DD4e',
    '0x2738FeE27ffE3D37946F9456457E42e697c0CbDB',
    // Autopilot-nrETH
    '0x467b43ede72543FC0FD79c7085435A484a87e0D7',
    '0xBf14af845b53Ac4F10322eD615D026135D3D862B',
    // Autopilot-USDC.e
    '0x2C7f58d2AfaCae1199c7e1E00FB629CCCEA5Bbd5',
    '0x0647022E8087BBA2E55C719f20E38BE688BEF3Df'
  ],
  Unemeta: ['0xbb4904e033Ef5Af3fc5d3D72888f1cAd7944784D'],
  'Derby Race': ['0xFCbD79F6a828045d90191959c430e6b383D03774'],
  Sonova: ['0xbfe6a3023C92B040f95B8c2e8C237AAf0AFc92AB', '0xcD8034e208498aD691ec22a16b34a521FdCaef5D'],
  ARCAS: [
    '0x570f09AC53b96929e3868f71864E36Ff6b1B67D7',
    '0x392440db3BeF15ea5E9aAdE9ddf72e923556001E',
    '0xDE06BE7FBd67ADAA1F7c35aFAF390431Adf3B739'
  ],
  Velodrome: [
    '0x652e53C6a4FE39B6B30426d9c96376a105C89A95',
    '0x3a63171DD9BebF4D07BC782FECC7eb0b890C2A45',
    '0x991d5546C4B442B4c5fdc4c8B8b8d131DEB24702'
  ],
  Quickswap: [
    '0x7B446Bfb3763Ed0892f08893Eb06Dda79aB28CB9',
    '0x8Ff309F68F6Caf77a78E9C20d2Af7Ed4bE2D7093',
    '0x4c5663252bBAB0a3B303a711823aD70a0ec9aE31',
    '0x22e5195BcC9b0C87f330FbCE2755B263662578E2',
    '0xeba58c20629ddab41e21a3E4E2422E583ebD9719',
    '0x0629B3c6E1cCfF2e31e3A9Bd67ec96b23BE6f1e9',
    '0x0629B3c6E1cCfF2e31e3A9Bd67ec96b23BE6f1e9',
    '0x2E4C17aEE528084e6dB16882d24fc1Dd0Ef20D97'
  ],
  SoneX: ['0x3E4ff8662820E3dec3DACDb66ef1FFad5Dc5Ab83', '0xDEf357D505690F1b0032a74C3b581163c23d1535'],
  'Kyo Finance': [
    '0x11feF46913EF8de4501e6B9452Ec77c26e736818',
    '0x3B574a321c7BFEF28e8021D210d063C9f72b17fC',
    '0x5D8429de7b98Ee465620ecf64Acb7d759Ad41e93',
    '0xC3d4fA777308412CbA0520c4034Ad3567de852dF',
    '0x3c56C7C1Bfd9dbC14Ab04935f409d49D3b7A802E',
    '0x0709b01C87Af28EC51Cb768A2E6352bAd6aD7817',
    '0x986d5bc7d1ebad7b6aa48b90d79ba2498e5e223dad50971c48f147ab6395bdd2',
    '0x137841043180BBA8EF52828F9030D1b7fE065F95',
    '0xAE2B32E603D303ED120f45B4Bc2ebAc314de080b',
    '0x4446B2f6dAFb515b489A3cEEbb5b5a91fe53B6f9',
    '0x60eb4B04932797374a291380349008dc8cc40426',
    '0x0dC73Fe1341365929Ed8a89Dd47097A9FDD254D0',
    '0x27a7F9FD22035e9a63468A187dbbF9E4dD97F79A',
    '0xafe4f575554E33e9F34007839652B7811A45d369',
    '0xf54c8516b0255aaf493382e8534bab492d4325d4c84374ac39f7fa643a5cfbcd'
  ],
  SoneFi: ['0x82d2d0aAE77967d42ACf4F30B53e2de0055338De', '0x368986EDcB1b2Ac55282752c6881c0E4A5A6b1bE'],
  Sonus: ['0xBeB481792E749A210DD0E1Fdbd366Fa8d4187A3F', '0xe0b6811a362a5e6171d4e214D259C51180933f76'],
  WaveX: [
    '0x23d0C1AadFaAa076c409fcdcfC078B77802e4203',
    '0x1c5d80Edb12341Dca11f4500aa67B4D2238F3220',
    '0x932757a768b6497c7F50bC975D279499fb9CbA91'
  ],
  SuperVol: ['0x34834F208F149e0269394324c3f19e06dF2ca9cB', '0x618148f2Bb58C5c89737BB160070613d4E1b790a'],
  Biru: ['0xCb5367109e9d6b8C03c4DAF71740159fC85BCFce', '0xA313D4f11e69A320A68167E7aAfacEA8F3413593'],
  'Treasure Hunt': ['0x435c4ED0647fD80CBEdB3d9a21445eCba8D5d156'],
  Evermoon: [
    '0xbBeEDcD5479cB885463905cb1b41eaa5dc8131fd',
    '0x6b2249389dC3Db6B27833279F594910caa6465e7',
    '0xE9C1024746C71C6F12d19eCC85FEe139d823AD54'
  ],
  'Posse Studios': ['0xFF4C94b6D2A89F5CA5FC46A49BE40A42f7352D18'],
  'Untitled Bank': [
    // UntitledHub
    '0x2469362f63e9f593087EBbb5AC395CA607B5842F',
    // UB-USDC Bank
    '0xc675BB95D73CA7db2C09c3dC04dAaA7944CCBA41',
    // UB-ASTR Bank
    '0x85A4fB48C7f9383083864D62aBECCDf318fd8E6F',
    // UB-WETH Bank
    '0x232554B4B291A446B4829300bec133FBB07A8f2A'
  ]
})

const isAddressEqual = (addr1: string | null, addr2: string | null) => addr1?.toLowerCase() == addr2?.toLowerCase()

export function handleACS(tx: { from: string; to: string | null; gasCost: BigDecimal }, ctx: GlobalContext) {
  for (const [project, addresses] of projects) {
    for (const address of addresses) {
      if (isAddressEqual(tx.from, address) || isAddressEqual(tx.to, address)) {
        ctx.eventLogger.emit('acs_tx', {
          distinctId: tx.from,
          ...tx,
          project
        })
        return
      }
    }
  }
}
